{"version":3,"file":"index-D0PIVW6W.mjs","sources":["../../admin/src/components/ReactIconsSelector/IconComponent.tsx","../../admin/src/components/ReactIconsSelector/IconLibraryComponent.tsx","../../admin/src/components/ReactIconsSelector/index.tsx"],"sourcesContent":["import React from 'react';\nimport { IconContext } from 'react-icons/lib';\nimport * as ReactIcons from '../../all';\nimport { IReactIcon } from '.';\n\ninterface IIconComponent {\n  icon: string;\n  size?: number;\n  onClick? : ()=> void\n}\n\nconst strapiTheme = window.localStorage.STRAPI_THEME;\n\nexport const IconComponent: React.FC<IIconComponent> = ({ icon, size }) => {\n  const DynamicIconComponent = ReactIcons[icon as IReactIcon];\n\n  if (undefined === DynamicIconComponent) return <></>;\n\n  return (\n    <IconContext.Provider value={{ color: strapiTheme === 'light' ? '#212134' : '#a5a5ba' }}>\n      {/* @ts-ignore */}\n      <DynamicIconComponent size={size} />\n    </IconContext.Provider>\n  );\n};\n","import React from 'react';\nimport { Box } from '@strapi/design-system';\nimport { IconComponent } from './IconComponent';\n\nexport interface IIconLibraryComponent {\n  icons: string[];\n  onSelectIcon: (newIcon: string) => void;\n}\n\nexport const IconLibraryComponent: React.FC<IIconLibraryComponent> = ({ icons, onSelectIcon }) => {\n  return (\n    <>\n      {icons.map((icon) => (\n        <Box\n          key={icon}\n          onClick={() => {\n            onSelectIcon(icon);\n          }}\n          title={icon}\n        >\n          <IconComponent size={30} icon={icon} />\n        </Box>\n      ))}\n    </>\n  );\n};\n","import React, { ReactNode, useEffect, useState } from 'react';\nimport {\n  Accordion,\n  Badge,\n  Box,\n  Button,\n  // FieldAction,\n  Flex,\n  Modal,\n  // Searchbar,\n  SearchForm,\n  SingleSelect as Select,\n  SingleSelectOption as Option,\n  TextInput,\n  Typography,\n  Field,\n} from '@strapi/design-system';\nimport { useField, type InputProps } from '@strapi/strapi/admin';\nimport * as ReactIcons from '../../all';\nimport { BiSearch, BiMinus, BiPlus } from 'react-icons/bi';\nimport { useIntl } from 'react-intl';\nimport { useFetchClient } from '@strapi/strapi/admin';\nimport getTrad from '../../utils/getTrad';\nimport { IconLibraryComponent } from './IconLibraryComponent';\n\ntype IconPickerProps = InputProps & {\n  labelAction?: React.ReactNode;\n};\n\nexport type IReactIcon = keyof typeof ReactIcons;\n\nconst ReactIconsSelector = ({\n  hint,\n  disabled,\n  labelAction,\n  label,\n  name,\n  required,\n  ...props\n}: InputProps & IconPickerProps) => {\n  // const {\n  //   // description, error, label,labelAction, placeholder, name, required, onChange, value\n  //   hint, disabled, labelAction, label, name, required, ...props\n  // } = props || {};\n  const { formatMessage } = useIntl();\n  const { get } = useFetchClient();\n  const iconPickerButtonRef = React.useRef<HTMLButtonElement>(null!);\n\n  const [iconLibraries, setIconLibraries] = useState<IIconLibrary[]>([]);\n  const [selectedIconLibrary, setSelectedIconLibrary] = useState<string | null>(null);\n  const allReactIcons = Object.keys(ReactIcons) as IReactIcon[];\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const field = useField(name);\n  const selectedIcon = field.value ?? '';\n\n  const toggleModal = () => setIsModalVisible((prev) => !prev);\n\n  const changeIcon = (newIcon: string) => field.onChange(name, newIcon);\n\n  const onSelectIcon = (newIcon: string) => {\n    toggleModal();\n    changeIcon(newIcon);\n  };\n\n  useEffect(() => {\n    const getIconLibraries = async () => {\n      setIconLibraries(\n        (await get('/strapi-icon-picker/iconlibrary/find')).data.filter(\n          (iconLibrary: IIconLibrary) => iconLibrary.isEnabled\n        )\n      );\n    };\n\n    getIconLibraries();\n  }, []);\n\n  const [expandedIDs, setExpandedID] = useState<string[]>([]);\n  const handleToggle = (id: string) => () => {\n    expandedIDs?.includes(id)\n      ? setExpandedID(expandedIDs.filter((i) => i !== id))\n      : setExpandedID([...expandedIDs, id]);\n  };\n\n  const handleExpand = () => {\n    console.log(\"exppp \", expandedIDs)\n    if (expandedIDs.length) {\n      setExpandedID([]);\n    } else {\n      setExpandedID(iconLibraries.map(({ id }) => id));\n    }\n  };\n\n  const renderModal = (selectedIcon: string) => {\n    const DynamicIconComponent = ReactIcons[selectedIcon as IReactIcon];\n\n    return (\n      <Modal.Root\n        defaultOpen={isModalVisible}\n        open={isModalVisible}\n        onOpenChange={setIsModalVisible}\n      >\n        <Modal.Trigger>\n          {typeof DynamicIconComponent !== 'undefined' ? <DynamicIconComponent size={30} style={{ cursor: 'pointer', width: 30, height: 30 }} /> : <BiSearch width={30} height={30} style={{ cursor: 'pointer', width: 30, height: 30 }} />}\n        </Modal.Trigger>\n        <Modal.Content>\n          <Modal.Header>\n            <Typography fontWeight=\"bold\" id=\"title\">\n              Select icon\n            </Typography>\n          </Modal.Header>\n          <Modal.Body>\n            <Box>\n              <SearchForm>\n                <Flex gap={2}>\n                  <Box key={1}>\n                    <TextInput\n                      onReset={() => setSearchTerm('')}\n                      value={searchTerm}\n                      onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n                        setSearchTerm(e.target.value)\n                      }\n                      placeholder={formatMessage({\n                        id: getTrad('iconSelector.search'),\n                      })}\n                    />\n                  </Box>\n                  <Box key={2}>\n                    {expandedIDs.length ? (\n                      <Button size=\"L\" onClick={handleExpand} startIcon={<BiMinus />}>\n                        Collapse All\n                      </Button>\n                    ) : (\n                      <Button size=\"L\" onClick={handleExpand} startIcon={<BiPlus />}>\n                        Expand All\n                      </Button>\n                    )}\n                  </Box>\n                </Flex>\n              </SearchForm>\n\n              {iconLibraries.length > 0 ? (\n                <Box padding={4} marginTop={2} background=\"neutral0\">\n                  <Accordion.Root collapsible>\n                    {iconLibraries\n                      .filter(\n                        (iconLibrary) =>\n                          !selectedIconLibrary || iconLibrary.abbreviation === selectedIconLibrary\n                      )\n                      .map(\n                        (iconLibrary) =>\n                          allReactIcons.filter(\n                            (icon) =>\n                              icon.toLowerCase().startsWith(iconLibrary.abbreviation) &&\n                              icon.toLowerCase().includes(searchTerm.toLowerCase())\n                          ).length > 0 && (\n                            <Accordion.Item\n                              value={iconLibrary.id}\n                              expanded={expandedIDs.includes(iconLibrary.id)}\n                              onClick={() => handleToggle(iconLibrary.id)}\n                              id={iconLibrary.id}\n                            // size=\"S\"\n                            >\n                              <Accordion.Header>\n                                <Accordion.Trigger\n                                  caretPosition=\"left\"\n                                // icon={User}\n                                >\n                                  {expandedIDs.includes(iconLibrary.id)}\n                                  <Flex justifyContent={'space-between'}>\n                                    <Typography>{`${iconLibrary.name} (${iconLibrary.abbreviation})`}</Typography>\n                                  </Flex>\n                                </Accordion.Trigger>\n                                <Accordion.Actions>\n                                  <Badge>\n                                    {\n                                      allReactIcons.filter(\n                                        (icon) =>\n                                          icon.toLowerCase().startsWith(iconLibrary.abbreviation) &&\n                                          icon.toLowerCase().includes(searchTerm.toLowerCase())\n                                      ).length\n                                    }\n                                  </Badge>\n                                </Accordion.Actions>\n                              </Accordion.Header>\n                              <Accordion.Content>\n                                <Box paddingLeft={3} paddingTop={3} paddingBottom={3}>\n                                  <Flex\n                                    direction=\"row\"\n                                    wrap=\"wrap\"\n                                    display=\"flex\"\n                                    alignItems=\"center\"\n                                    gap={1}\n                                  >\n                                    <IconLibraryComponent\n                                      icons={allReactIcons.filter(\n                                        (icon) =>\n                                          icon.toLowerCase().startsWith(iconLibrary.abbreviation) &&\n                                          icon.toLowerCase().includes(searchTerm.toLowerCase())\n                                      )}\n                                      onSelectIcon={onSelectIcon}\n                                    />\n                                  </Flex>\n                                </Box>\n                              </Accordion.Content>\n                            </Accordion.Item>\n                          )\n                      )}\n                  </Accordion.Root>\n                </Box>\n              ) : (\n                <Typography variant=\"pi\">\n                  {formatMessage({\n                    id: getTrad('iconSelector.noIconLibrariesAvailable'),\n                  })}\n                </Typography>\n              )}\n            </Box>\n          </Modal.Body>\n          <Modal.Footer>\n            <Select\n              required={false}\n              value={selectedIconLibrary}\n              onChange={(value: string) => setSelectedIconLibrary(value)}\n            >\n              <Option value=\"\">\n                {formatMessage({ id: getTrad('iconSelector.allIconLibraries') })}\n              </Option>\n\n              {iconLibraries.map((iconLibrary) => (\n                <Option key={iconLibrary.id} value={iconLibrary.abbreviation}>\n                  {iconLibrary.name}\n                </Option>\n              ))}\n            </Select>\n          </Modal.Footer>\n        </Modal.Content>\n      </Modal.Root>\n    );\n  };\n  return (\n    <>\n      <Field.Root name={name} id={name} error={field.error} required={required}>\n        <Flex direction=\"column\" alignItems=\"stretch\" gap={1}>\n          <Field.Label action={labelAction}>{label as ReactNode}</Field.Label>\n          <Field.Input\n            {...props}\n            value={selectedIcon}\n            aria-label={formatMessage({\n              id: getTrad('color-picker.input.aria-label'),\n              defaultMessage: 'Color picker input',\n            })}\n            style={{ /*textTransform: 'uppercase',*/ }}\n            name={name}\n            onChange={field.onChange}\n            startAction={renderModal(selectedIcon)}\n          />\n          <Field.Hint />\n          <Field.Error />\n        </Flex>\n      </Field.Root>\n    </>\n  );\n};\n\nexport default ReactIconsSelector;\n"],"names":["React","selectedIcon","Select","Option"],"mappings":"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"}